:root { --primary:#4f46e5; --primary-dark:#4338ca; --primary-soft:#eef2ff; --text-main:#1e293b; --text-sub:#64748b; --text-light:#94a3b8; --bg-body:#f8fafc; --surface:rgba(255,255,255,0.85); --border:#e2e8f0; --accent-red:#e11d48; --accent-bg-red:#fff1f2; --radius-lg:24px; --radius-md:16px; --shadow-card:0 10px 40px -10px rgba(148,163,184,0.3); --num-start:#334155; --num-end:#4f46e5; }
body.dark-mode { --bg-body:#020617; --surface:rgba(30,41,59,0.7); --text-main:#f1f5f9; --text-sub:#94a3b8; --text-light:#64748b; --border:rgba(255,255,255,0.08); --primary:#818cf8; --primary-dark:#6366f1; --primary-soft:rgba(99,102,241,0.15); --accent-bg-red:rgba(225,29,72,0.15); --accent-red:#fb7185; --shadow-card:0 10px 40px -10px rgba(0,0,0,0.7); --num-start:#e2e8f0; --num-end:#818cf8; }

::-webkit-scrollbar { width:5px; height:5px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:#cbd5e1; border-radius:4px; }
body.dark-mode ::-webkit-scrollbar-thumb { background:#475569; }
body.dark-mode ::-webkit-scrollbar-track { background:rgba(255,255,255,0.02); }
* { scrollbar-width:thin; scrollbar-color:#cbd5e1 transparent; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
body.dark-mode * { scrollbar-color:#475569 transparent; }

body { margin:0; width:100%; min-height:100dvh; font-family:'DM Sans','Noto Sans TC',sans-serif; background:var(--bg-body); color:var(--text-main); display:flex; flex-direction:column; align-items:center; overflow-x:hidden; transition:background .4s ease,color .3s ease; }
.bg-decoration { position:fixed; inset:0; z-index:-1; pointer-events:none; overflow:hidden; }
.orb { position:absolute; border-radius:50%; filter:blur(100px); opacity:.5; animation:float 20s infinite ease-in-out; }
.orb-1 { width:350px; height:350px; background:radial-gradient(circle,var(--primary-soft) 0%,transparent 70%); top:-10%; left:-10%; }
.orb-2 { width:300px; height:300px; background:radial-gradient(circle,var(--accent-bg-red) 0%,transparent 70%); bottom:-10%; right:-10%; }
body.dark-mode .orb { opacity:.25; filter:blur(120px); }
@keyframes float { 0%,100%{transform:translate(0,0)} 50%{transform:translate(30px,-30px)} }

.app-container { width:100%; max-width:500px; min-height:100dvh; padding:max(16px,env(safe-area-inset-top)) 16px max(24px,env(safe-area-inset-bottom)); display:flex; flex-direction:column; gap:20px; margin:0 auto; }
.glass { background:var(--surface); backdrop-filter:blur(20px); -webkit-backdrop-filter:blur(20px); border:1px solid var(--border); border-radius:var(--radius-lg); box-shadow:var(--shadow-card); width:100%; }

.app-header { display:flex; justify-content:space-between; align-items:center; height:44px; flex-shrink:0; }
.status-indicator { font-size:.75rem; font-weight:700; color:var(--text-sub); display:flex; align-items:center; gap:8px; background:var(--surface); padding:6px 14px; border-radius:20px; border:1px solid var(--border); }
.dot { width:8px; height:8px; background:#10b981; border-radius:50%; box-shadow:0 0 8px rgba(16,185,129,.6); }
.btn-icon, .lang-switch { background:var(--surface); border:1px solid var(--border); border-radius:50%; width:40px; height:40px; display:flex; align-items:center; justify-content:center; cursor:pointer; color:var(--text-main); font-size:1.1rem; transition:.2s; }
.lang-switch { width:auto; border-radius:20px; padding:0 14px; font-size:.85rem; font-weight:700; }
.btn-icon:active, .lang-switch:active { transform:scale(.95); background:var(--border); }

.hero-section { display:flex; flex-direction:column; align-items:center; justify-content:center; padding:32px 20px; text-align:center; flex-shrink:0; position:relative; overflow:hidden; }
.hero-label { font-size:.8rem; font-weight:800; color:var(--text-light); letter-spacing:2px; text-transform:uppercase; margin:0; opacity:.8; }
#number { font-size:clamp(5rem,22vw,9rem); font-weight:900; line-height:1.1; margin:4px 0 20px; background:linear-gradient(180deg,var(--num-start) 0%,var(--num-end) 100%); -webkit-background-clip:text; -webkit-text-fill-color:transparent; filter:drop-shadow(0 4px 10px rgba(79,70,229,.15)); }
body.dark-mode #number { filter:drop-shadow(0 0 25px rgba(129,140,248,.4)); }
@keyframes pop-in { 0%{transform:scale(.9);opacity:.8} 60%{transform:scale(1.05)} 100%{transform:scale(1);opacity:1} }
.number-change-anim { animation:pop-in .4s cubic-bezier(.175,.885,.32,1.275); }

.hero-stats-grid { display:flex; gap:20px; width:100%; justify-content:center; background:var(--bg-body); padding:16px; border-radius:20px; border:1px solid var(--border); }
body.dark-mode .hero-stats-grid { background:rgba(0,0,0,.2); }
.stat-item { display:flex; flex-direction:column; align-items:center; min-width:60px; }
.s-label { font-size:.7rem; color:var(--text-sub); font-weight:700; text-transform:uppercase; margin-bottom:2px; }
.s-value { font-size:1.5rem; font-weight:800; color:var(--text-main); line-height:1.1; }
.stat-divider { width:1px; height:36px; background:var(--border); align-self:center; }

.side-panel { flex:1; display:flex; flex-direction:column; gap:20px; width:100%; min-width:0; }
.control-section { padding:24px; }
.action-header h3 { font-size:1.2rem; margin:0 0 6px; color:var(--text-main); font-weight:800; letter-spacing:-.5px; }
.func-desc { font-size:.9rem; color:var(--text-sub); margin:0 0 20px; font-weight:500; }
.btn-main { width:100%; height:60px; border:none; border-radius:18px; background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%); color:#fff; font-size:1.15rem; font-weight:700; cursor:pointer; box-shadow:0 8px 20px -6px rgba(79,70,229,.5); display:flex; align-items:center; justify-content:center; gap:12px; transition:.1s,box-shadow .2s; position:relative; overflow:hidden; }
body.dark-mode .btn-main { box-shadow:0 0 25px rgba(99,102,241,.4); border:1px solid rgba(255,255,255,.15); }
.btn-main:active { transform:scale(.97); box-shadow:0 4px 12px -4px rgba(79,70,229,.5); }
.input-wrapper { display:flex; gap:10px; margin-top:10px; }
.fancy-input { flex:1; height:52px; border:2px solid var(--border); border-radius:14px; text-align:center; font-size:1.2rem; font-weight:700; background:var(--bg-body); color:var(--text-main); min-width:0; transition:.2s; }
.fancy-input:focus { border-color:var(--primary); box-shadow:0 0 0 4px var(--primary-soft); }
.btn-track { height:52px; padding:0 20px; border:none; border-radius:14px; background:var(--text-main); color:var(--bg-body); font-weight:700; white-space:nowrap; }

.my-ticket-card { background:linear-gradient(145deg,#1e293b 0%,#0f172a 100%); color:#fff; padding:24px; border-radius:20px; margin-top:20px; box-shadow:0 15px 35px -5px rgba(0,0,0,.3); position:relative; overflow:hidden; border:1px solid rgba(255,255,255,.1); }
body.dark-mode .my-ticket-card { background:linear-gradient(145deg,#312e81 0%,#1e1b4b 100%); box-shadow:0 15px 40px -5px rgba(0,0,0,.6); }
.ticket-row { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; position:relative; z-index:1; }
.my-num { font-size:3.5rem; font-weight:900; line-height:1; color:#fff; text-shadow:0 4px 10px rgba(0,0,0,.3); margin-top:10px; }
.t-label { color:rgba(255,255,255,.6); font-size:.8rem; font-weight:700; text-transform:uppercase; letter-spacing:1px; }
.w-val { font-size:1.8rem; font-weight:800; color:#818cf8; }
.ticket-row.footer { margin-top:16px; padding-top:16px; border-top:1px dashed rgba(255,255,255,.2); font-size:.9rem; opacity:.9; }
.btn-close { background:rgba(255,255,255,.15); border:none; color:#fff; width:32px; height:32px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; }

.list-section { padding:16px 20px; display:flex; flex-direction:column; min-height:0; }
.list-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; padding-bottom:8px; border-bottom:1px solid var(--border); }
.list-title { font-weight:800; color:var(--text-main); display:flex; align-items:center; gap:8px; font-size:1rem; }
.badge { background:var(--text-main); color:var(--bg-body); padding:2px 8px; border-radius:10px; font-size:.75rem; font-weight:700; }
.scroll-view { overflow-y:auto; max-height:150px; padding-right:4px; -webkit-overflow-scrolling:touch; }
.tag-list { display:grid!important; grid-template-columns:repeat(auto-fill,minmax(60px,1fr))!important; gap:10px; list-style:none; padding:0; margin:0; width:100%; }
.tag-list li { font-size:.9rem; font-weight:700; color:var(--accent-red); background:var(--accent-bg-red); padding:8px 4px; border-radius:14px; border:1px solid rgba(225,29,72,.1); width:100%!important; display:flex; justify-content:center; align-items:center; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; transition:.2s; }
.tag-list li:hover { transform:translateY(-2px); }
.empty-state { color:var(--text-light); font-size:.9rem; text-align:center; padding:10px; font-style:italic; opacity:.7; }
.footer-tools { margin-top:20px; padding-top:20px; border-top:1px dashed var(--border); }
.links-label { font-size:.75rem; color:var(--text-sub); font-weight:800; margin-bottom:10px; text-transform:uppercase; letter-spacing:1px; }
#featured-container { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:16px; }
.link-chip { display:inline-block; font-size:.85rem; padding:8px 16px; background:var(--bg-body); border:1px solid var(--border); border-radius:12px; text-decoration:none; color:var(--primary); font-weight:700; max-width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; box-shadow:0 2px 4px rgba(0,0,0,.02); transition:.2s; }
.link-chip:active { background:var(--border); transform:scale(.98); }
.util-btns { display:flex; gap:10px; }
.btn-util { flex:1; height:44px; background:var(--bg-body); border:1px solid var(--border); border-radius:12px; color:var(--text-sub); font-size:.9rem; font-weight:600; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:8px; transition:.2s; }
.btn-util:hover { background:var(--border); color:var(--text-main); }

#status-bar { position:fixed; top:0; width:100%; background:var(--accent-red); color:#fff; text-align:center; padding:8px; transform:translateY(-100%); transition:.3s; z-index:9999; font-size:.85rem; font-weight:700; box-shadow:0 4px 10px rgba(225,29,72,.4); }
#status-bar.visible { transform:translateY(0); }
#toast-container { position:fixed; bottom:100px; left:50%; transform:translateX(-50%); z-index:9999; width:100%; pointer-events:none; display:flex; flex-direction:column; align-items:center; }
.toast-message { background:rgba(15,23,42,.9); backdrop-filter:blur(10px); color:#fff; padding:12px 24px; border-radius:30px; margin-top:10px; opacity:0; transform:translateY(10px); transition:.3s; font-size:.95rem; font-weight:600; box-shadow:0 10px 30px rgba(0,0,0,.3); border:1px solid rgba(255,255,255,.1); }
.toast-message.show { opacity:1; transform:translateY(0); }
body.dark-mode .toast-message { background:rgba(255,255,255,.95); color:#0f172a; }
#qr-code-container { display:none; }

@media (min-width:1024px) {
    .app-container { max-width:1100px; height:90vh; display:grid; grid-template-columns:1.1fr 1fr; gap:40px; align-content:center; margin:auto; padding:0; }
    .app-header { position:absolute; top:30px; right:40px; width:auto; z-index:10; } .status-indicator { display:none; }
    .hero-section { height:100%; justify-content:center; background:var(--surface); box-shadow:var(--shadow-card); border-radius:30px; padding:60px; }
    #number { font-size:13rem; margin:30px 0; }
    .side-panel { justify-content:center; height:100%; gap:24px; } .control-section { order:0; padding:32px; } .list-section { flex:0 0 auto; max-height:none; overflow:hidden; padding:24px; } .scroll-view { flex:1; max-height:250px; } .util-btns { width:auto; }
    #qr-code-container { display:block; position:fixed; bottom:30px; left:30px; padding:20px; background:#fff; border-radius:20px; box-shadow:0 10px 40px rgba(0,0,0,.15); text-align:center; font-size:.85rem; color:var(--text-sub); } #qr-code-placeholder img { display:block; margin:0 auto 8px; }
}

body.kiosk-mode .hero-section { position:fixed; top:0; left:0; width:100vw; height:100dvh; z-index:100; padding:0; margin:0; border-radius:0; display:flex; flex-direction:column; justify-content:center; box-shadow:none; background:var(--bg-body); }
body.kiosk-mode #number { font-size:clamp(15rem,35vw,30rem); margin:20px 0; }
body.kiosk-mode .hero-stats-grid { transform:scale(1.5); margin-top:5vh; width:80%; max-width:800px; background:var(--surface); backdrop-filter:blur(10px); border:1px solid var(--border); }
body.kiosk-mode .side-panel, body.kiosk-mode .app-header, body.kiosk-mode #qr-code-container { display:none!important; }
body.kiosk-mode .bg-decoration { opacity:0.8; }

@media (max-width:768px) {
    .app-container { gap:6px; padding:8px 8px 16px; min-height:100dvh; }
    .hero-section { padding:12px 16px; border-radius:20px; }
    .hero-label { font-size:0.75rem; margin-bottom:0; }
    #number { font-size:5rem; margin:0 0 8px; line-height:1; }
    .hero-stats-grid { padding:8px 12px; gap:12px; margin-top:0; }
    .s-value { font-size:1.3rem; }
    .side-panel { gap:6px; }
    .control-section, .list-section { padding:12px 14px; }
    .action-header h3 { font-size:1.1rem; margin-bottom:2px; }
    .func-desc { margin-bottom:8px; font-size:0.85rem; }
    .btn-main { height:50px; font-size:1.05rem; border-radius:14px; }
    .fancy-input, .btn-track { height:46px; }
    .list-header { margin-bottom:8px; padding-bottom:6px; }
    .tag-list { gap:8px; }
    .tag-list li { font-size:0.85rem; padding:6px 4px; }
    .footer-tools { margin-top:12px; padding-top:12px; }
    .btn-util { height:40px; font-size:0.85rem; }
    .bg-decoration { opacity:0.3; }
}
